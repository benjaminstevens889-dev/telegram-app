<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªÙ„Ú¯Ø±Ø§Ù… ÙˆØ¨</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            background: #0e1621;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        .app { display: flex; flex: 1; overflow: hidden; }
        
        /* Sidebar */
        .sidebar {
            width: 350px;
            background: #17212b;
            border-left: 1px solid #0e1621;
            display: flex;
            flex-direction: column;
        }
        .sidebar-header {
            padding: 15px;
            border-bottom: 1px solid #0e1621;
        }
        .sidebar-header input {
            width: 100%;
            padding: 12px 18px;
            background: #242f3d;
            border: none;
            border-radius: 22px;
            color: #fff;
            font-size: 14px;
            outline: none;
        }
        .sidebar-header input::placeholder { color: #6b7c8f; }
        .sidebar-header input:focus { box-shadow: 0 0 0 2px #5eb5f7; }
        
        .chat-list { flex: 1; overflow-y: auto; }
        .chat-item {
            display: flex;
            align-items: center;
            padding: 14px 18px;
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        .chat-item:hover { background: #202b36; }
        .chat-item.active { background: #2b5278; }
        
        .avatar {
            width: 52px;
            height: 52px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-size: 20px;
            font-weight: 600;
            margin-left: 14px;
            flex-shrink: 0;
        }
        .chat-info { flex: 1; min-width: 0; }
        .chat-name { color: #fff; font-size: 15px; font-weight: 500; margin-bottom: 5px; }
        .chat-preview { color: #7a8b9a; font-size: 13px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .chat-meta { text-align: left; margin-right: 10px; }
        .chat-time { color: #7a8b9a; font-size: 12px; }
        .unread-badge {
            background: #5eb5f7;
            color: #fff;
            font-size: 12px;
            padding: 2px 8px;
            border-radius: 12px;
            margin-top: 5px;
            display: inline-block;
        }
        
        /* Chat Area */
        .chat-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: linear-gradient(180deg, #0f1923 0%, #0e1621 100%);
        }
        .chat-header {
            padding: 16px 24px;
            background: #17212b;
            display: flex;
            align-items: center;
            border-bottom: 1px solid #0e1621;
        }
        .chat-header .avatar { margin-left: 16px; }
        .chat-header-info h3 { color: #fff; font-size: 16px; font-weight: 500; }
        .chat-header-info p { color: #7a8b9a; font-size: 13px; margin-top: 3px; }
        .chat-header-info p.online { color: #4fcf5f; }
        .chat-header-actions { margin-right: auto; display: flex; gap: 8px; }
        .header-btn {
            width: 40px; height: 40px;
            border-radius: 50%;
            background: transparent;
            border: none;
            color: #7a8b9a;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.2s;
        }
        .header-btn:hover { background: #202b36; color: #5eb5f7; }
        
        /* Messages */
        .messages {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .message {
            max-width: 60%;
            padding: 10px 16px;
            border-radius: 14px;
            position: relative;
        }
        .message.received {
            background: #182533;
            align-self: flex-start;
            border-bottom-right-radius: 4px;
        }
        .message.sent {
            background: #2b5278;
            align-self: flex-end;
            border-bottom-left-radius: 4px;
        }
        .message-text { color: #fff; font-size: 14px; line-height: 1.5; }
        .message-footer {
            display: flex;
            align-items: center;
            justify-content: flex-end;
            gap: 6px;
            margin-top: 6px;
        }
        .message-time { color: rgba(255,255,255,0.5); font-size: 11px; }
        .message-status { font-size: 16px; }
        .message-status.read { color: #5eb5f7; }
        .message-status.unread { color: rgba(255,255,255,0.5); }
        
        /* Voice Message */
        .voice-msg {
            display: flex;
            align-items: center;
            gap: 12px;
            min-width: 220px;
        }
        .play-btn {
            width: 42px; height: 42px;
            border-radius: 50%;
            background: rgba(255,255,255,0.15);
            border: none;
            color: #fff;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }
        .play-btn:hover { background: rgba(255,255,255,0.25); }
        .waveform {
            flex: 1;
            height: 28px;
            display: flex;
            align-items: center;
            gap: 2px;
        }
        .bar {
            width: 3px;
            background: rgba(255,255,255,0.4);
            border-radius: 2px;
            transition: all 0.2s;
        }
        .bar.active { background: #fff; }
        .voice-time { color: rgba(255,255,255,0.5); font-size: 12px; }
        
        /* Input */
        .input-area {
            padding: 16px 24px;
            background: #17212b;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .input-btn {
            width: 44px; height: 44px;
            border-radius: 50%;
            background: transparent;
            border: none;
            color: #7a8b9a;
            cursor: pointer;
            font-size: 20px;
            transition: all 0.2s;
        }
        .input-btn:hover { background: #202b36; }
        .input-btn.attach:hover { color: #5eb5f7; }
        .input-btn.video:hover { color: #5eb5f7; }
        .input-btn.mic { color: #f44336; }
        .input-btn.mic:hover { background: rgba(244,67,54,0.15); }
        .msg-input {
            flex: 1;
            padding: 14px 20px;
            background: #242f3d;
            border: none;
            border-radius: 25px;
            color: #fff;
            font-size: 14px;
            outline: none;
            transition: all 0.2s;
        }
        .msg-input:focus { box-shadow: 0 0 0 2px rgba(94,181,247,0.3); }
        .msg-input::placeholder { color: #6b7c8f; }
        .send-btn {
            width: 48px; height: 48px;
            border-radius: 50%;
            background: #5eb5f7;
            border: none;
            color: #fff;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }
        .send-btn:hover { background: #4a9fd9; transform: scale(1.05); }
        
        /* Typing indicator */
        .typing { color: #7a8b9a; font-size: 13px; padding: 8px 24px; }
        .typing span { animation: dots 1.4s infinite; }
        .typing span:nth-child(2) { animation-delay: 0.2s; }
        .typing span:nth-child(3) { animation-delay: 0.4s; }
        @keyframes dots {
            0%, 60%, 100% { opacity: 0; }
            30% { opacity: 1; }
        }
        
        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #2b3a4a; border-radius: 3px; }
    </style>
</head>
<body>
    <div class="app">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <input type="text" placeholder="Ø¬Ø³ØªØ¬ÙˆÛŒ Ú©Ø§Ø±Ø¨Ø±..." id="searchInput">
            </div>
            <div class="chat-list" id="chatList"></div>
        </div>
        
        <!-- Chat Area -->
        <div class="chat-area">
            <div class="chat-header" id="chatHeader">
                <div class="avatar" style="background: linear-gradient(135deg, #667eea, #764ba2);">Ø¹</div>
                <div class="chat-header-info">
                    <h3>Ø¹Ù„ÛŒ Ù…Ø­Ù…Ø¯ÛŒ</h3>
                    <p class="online">Ø¢Ù†Ù„Ø§ÛŒÙ†</p>
                </div>
                <div class="chat-header-actions">
                    <button class="header-btn">ðŸ“ž</button>
                    <button class="header-btn">â‹®</button>
                </div>
            </div>
            
            <div class="typing" id="typingIndicator" style="display: none;">
                Ø¯Ø± Ø­Ø§Ù„ Ù†ÙˆØ´ØªÙ†<span>.</span><span>.</span><span>.</span>
            </div>
            
            <div class="messages" id="messages"></div>
            
            <div class="input-area">
                <button class="input-btn attach" title="Ù¾ÛŒÙˆØ³Øª ÙØ§ÛŒÙ„">ðŸ“Ž</button>
                <button class="input-btn video" title="Ø¶Ø¨Ø· ÙˆÛŒØ¯ÛŒÙˆ">ðŸ“¹</button>
                <input type="text" class="msg-input" placeholder="Ù¾ÛŒØ§Ù… Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯..." id="msgInput">
                <button class="input-btn mic" title="Ø¶Ø¨Ø· ØµØ¯Ø§">ðŸŽ¤</button>
                <button class="send-btn" id="sendBtn">âž¤</button>
            </div>
        </div>
    </div>

    <script>
        // Chat data
        const chats = [
            { id: 1, name: 'Ø¹Ù„ÛŒ Ù…Ø­Ù…Ø¯ÛŒ', avatar: 'Ø¹', color: 'linear-gradient(135deg, #667eea, #764ba2)', lastMsg: 'Ø³Ù„Ø§Ù…! Ø®ÙˆØ¨ÛŒØŸ', time: '12:30', unread: 2, online: true },
            { id: 2, name: 'Ù…Ø±ÛŒÙ… Ø§Ø­Ù…Ø¯ÛŒ', avatar: 'Ù…', color: 'linear-gradient(135deg, #f093fb, #f5576c)', lastMsg: 'ÙˆÛŒØ¯ÛŒÙˆ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯ ðŸ“¹', time: '11:45', unread: 0, online: true },
            { id: 3, name: 'Ø±Ø¶Ø§ Ú©Ø±ÛŒÙ…ÛŒ', avatar: 'Ø±', color: 'linear-gradient(135deg, #4facfe, #00f2fe)', lastMsg: 'ðŸŽ¤ Ù¾ÛŒØ§Ù… ØµÙˆØªÛŒ', time: '10:20', unread: 0, online: false },
            { id: 4, name: 'Ø³Ø§Ø±Ø§ Ù†ÙˆØ±ÛŒ', avatar: 'Ø³', color: 'linear-gradient(135deg, #43e97b, #38f9d7)', lastMsg: 'Ù…Ù…Ù†ÙˆÙ†! ðŸ™', time: 'Ø¯ÛŒØ±ÙˆØ²', unread: 0, online: false },
            { id: 5, name: 'Ù…Ø­Ù…Ø¯ Ø±Ø¶Ø§ÛŒÛŒ', avatar: 'Ù…', color: 'linear-gradient(135deg, #fa709a, #fee140)', lastMsg: 'ÙØ±Ø¯Ø§ Ù…ÛŒØ¨ÛŒÙ†Ù…Øª', time: 'Ø¯ÛŒØ±ÙˆØ²', unread: 0, online: false },
        ];

        // Messages data
        let messages = [
            { id: 1, text: 'Ø³Ù„Ø§Ù…! Ø®ÙˆØ¨ÛŒØŸ', sent: false, time: '12:28', read: true },
            { id: 2, text: 'Ø³Ù„Ø§Ù…! Ø®ÙˆØ¨Ù… Ù…Ù…Ù†ÙˆÙ† ðŸ˜Š ØªÙˆ Ú†Ø·ÙˆØ±ÛŒØŸ', sent: true, time: '12:29', read: true },
            { id: 3, text: 'Ù…Ù†Ù… Ø®ÙˆØ¨Ù…! Ø¯Ø§Ø´ØªÙ… ÙÚ©Ø± Ù…ÛŒâ€ŒÚ©Ø±Ø¯Ù… Ø´Ø§ÛŒØ¯ ÙØ±Ø¯Ø§ Ø¨Ø±ÛŒÙ… Ú©Ø§ÙÛŒâ€ŒØ´Ø§Ù¾ØŸ', sent: false, time: '12:30', read: true },
            { id: 4, text: 'Ø¢Ø±Ù‡ Ø­ØªÙ…Ø§Ù‹! Ø³Ø§Ø¹Øª Ú†Ù†Ø¯ØŸ', sent: true, time: '12:31', read: true },
            { id: 5, voice: true, duration: '0:15', sent: true, time: '12:32', read: true },
            { id: 6, text: 'Ø¹Ø§Ù„ÛŒÙ‡! Ù¾Ø³ Ø³Ø§Ø¹Øª Ûµ Ø¨Ø§Ø´Ø¯ ðŸ‘', sent: false, time: '12:33', read: false },
        ];

        let currentChat = chats[0];

        // Render chat list
        function renderChatList() {
            const chatList = document.getElementById('chatList');
            chatList.innerHTML = chats.map(chat => `
                <div class="chat-item ${chat.id === currentChat.id ? 'active' : ''}" onclick="selectChat(${chat.id})">
                    <div class="avatar" style="background: ${chat.color}">${chat.avatar}</div>
                    <div class="chat-info">
                        <div class="chat-name">${chat.name}</div>
                        <div class="chat-preview">${chat.lastMsg}</div>
                    </div>
                    <div class="chat-meta">
                        <div class="chat-time">${chat.time}</div>
                        ${chat.unread > 0 ? `<span class="unread-badge">${chat.unread}</span>` : ''}
                    </div>
                </div>
            `).join('');
        }

        // Generate waveform bars
        function generateWaveform(active = false) {
            let bars = '';
            for (let i = 0; i < 30; i++) {
                const height = Math.random() * 20 + 8;
                const isActive = active && i < 15;
                bars += `<div class="bar ${isActive ? 'active' : ''}" style="height: ${height}px"></div>`;
            }
            return bars;
        }

        // Render messages
        function renderMessages() {
            const messagesEl = document.getElementById('messages');
            messagesEl.innerHTML = messages.map(msg => {
                if (msg.voice) {
                    return `
                        <div class="message ${msg.sent ? 'sent' : 'received'}">
                            <div class="voice-msg">
                                <button class="play-btn">â–¶</button>
                                <div class="waveform">${generateWaveform(msg.sent)}</div>
                                <span class="voice-time">${msg.duration}</span>
                            </div>
                            <div class="message-footer">
                                <span class="message-time">${msg.time}</span>
                                ${msg.sent ? `<span class="message-status ${msg.read ? 'read' : 'unread'}">${msg.read ? 'âœ“âœ“' : 'âœ“'}</span>` : ''}
                            </div>
                        </div>
                    `;
                }
                return `
                    <div class="message ${msg.sent ? 'sent' : 'received'}">
                        <div class="message-text">${msg.text}</div>
                        <div class="message-footer">
                            <span class="message-time">${msg.time}</span>
                            ${msg.sent ? `<span class="message-status ${msg.read ? 'read' : 'unread'}">${msg.read ? 'âœ“âœ“' : 'âœ“'}</span>` : ''}
                        </div>
                    </div>
                `;
            }).join('');
            messagesEl.scrollTop = messagesEl.scrollHeight;
        }

        // Select chat
        function selectChat(id) {
            currentChat = chats.find(c => c.id === id);
            // Update header
            document.querySelector('.chat-header .avatar').textContent = currentChat.avatar;
            document.querySelector('.chat-header .avatar').style.background = currentChat.color;
            document.querySelector('.chat-header h3').textContent = currentChat.name;
            document.querySelector('.chat-header p').textContent = currentChat.online ? 'Ø¢Ù†Ù„Ø§ÛŒÙ†' : 'Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø§Ø²Ø¯ÛŒØ¯: Ø§Ø®ÛŒØ±Ø§Ù‹';
            document.querySelector('.chat-header p').className = currentChat.online ? 'online' : '';
            renderChatList();
        }

        // Send message
        function sendMessage() {
            const input = document.getElementById('msgInput');
            const text = input.value.trim();
            if (!text) return;

            const now = new Date();
            const time = now.getHours().toString().padStart(2, '0') + ':' + now.getMinutes().toString().padStart(2, '0');
            
            messages.push({
                id: messages.length + 1,
                text: text,
                sent: true,
                time: time,
                read: false
            });

            input.value = '';
            renderMessages();

            // Simulate reply after 1-2 seconds
            setTimeout(() => {
                document.getElementById('typingIndicator').style.display = 'block';
                
                setTimeout(() => {
                    document.getElementById('typingIndicator').style.display = 'none';
                    
                    const replies = [
                        'Ø¨Ø§Ø´Ù‡ Ø­ØªÙ…Ø§Ù‹! ðŸ‘',
                        'Ø¹Ø§Ù„ÛŒÙ‡! ðŸ˜Š',
                        'Ø®ÛŒÙ„ÛŒ Ø®ÙˆØ¨!',
                        'Ù…ØªÙˆØ¬Ù‡ Ø´Ø¯Ù…ØŒ Ù…Ù…Ù†ÙˆÙ†',
                        'Ø­ØªÙ…Ø§Ù‹ Ø®Ø¨Ø± Ù…ÛŒØ¯Ù…',
                        'ÙÙ‡Ù…ÛŒØ¯Ù… ðŸ‘Œ'
                    ];
                    
                    messages.push({
                        id: messages.length + 1,
                        text: replies[Math.floor(Math.random() * replies.length)],
                        sent: false,
                        time: new Date().getHours().toString().padStart(2, '0') + ':' + new Date().getMinutes().toString().padStart(2, '0'),
                        read: true
                    });
                    
                    // Mark previous messages as read
                    messages.forEach(m => { if (m.sent) m.read = true; });
                    
                    renderMessages();
                }, 1500);
            }, 500);
        }

        // Event listeners
        document.getElementById('sendBtn').addEventListener('click', sendMessage);
        document.getElementById('msgInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });

        // Initial render
        renderChatList();
        renderMessages();
    </script>
</body>
</html>
